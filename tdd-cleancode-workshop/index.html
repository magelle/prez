<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>TDD / Clean code</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/novencia.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
<div class="reveal">
    <div class="slides">
        <section>
            <h2>Test Driven Development</h2>
            <h3>Novencia</h3>
        </section>
        <section>
            <section>
                <h2>Test Driven Development</h2>
                <aside class="notes">
                    TDD c'est quoi pour vous ?
                </aside>
            </section>
            <section>
                <h2>TDD, Pourquoi ?</h2>
                <ul class="fragment fade-in">
                    <li>Tests first</li>
                    <li>Documentation</li>
                    <li>Design</li>
                    <li>Expérimentation</li>
                    <li>Harnais de sécurité</li>
                    <li>Guide</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Test firsts : Reflection autour du test -> autour de la fonctionnalité</li>
                        <li>Documentation : comment ça fonctionne</li>
                        <li>Design : Test compliqué -> design adapté ?</li>
                        <li>Expérimentation : comment ça réagi si -> nouveau test</li>
                        <li>Harnais : exécuté à la compilation -> je sais si ça explose</li>
                        <li>Guide : laissez-vous guider</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Différentes écoles</h2>
                <ul>
                    <li>Classic
                        <ul>
                            <li>Inside out</li>
                            <li>Bottom up</li>
                        </ul>
                    </li>
                    <br/>
                    <li>Mockist
                        <ul>
                            <li>Outside in</li>
                            <li>Top down</li>
                        </ul>
                    </li>
                </ul>
                <aside class="notes">
                    Deux écoles
                    <ul>
                        <li>Classic : design first, commence par petites briques puis agrégation</li>
                        <li>Mockist : on mock tout, on commence par la big picture</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Caractéristiques d'un test</h2>
                <ul>
                    <li><b>F</b><span class="fragment fade-in">ast</span></li>
                    <li><b>I</b><span class="fragment fade-in">solated</span></li>
                    <li><b>R</b><span class="fragment fade-in">epeatable</span></li>
                    <li><b>S</b><span class="fragment fade-in">elf-checking</span></li>
                    <li><b>T</b><span class="fragment fade-in">imely</span></li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Fast : je peux l'éxecuter souvent</li>
                        <li>Isolated : Pas de dépendances</li>
                        <li>Repeatable : On lance N fois -> même résultat</li>
                        <li>Self-checking : Rouge ou vert, sans intervention humaine</li>
                        <li>Timely : Ecrit en même temps que le code</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Caractéristiques d'un test</h2>
                <b>Tests unitaires</b>
                <ul>
                    <li>Test d'un seul composant</li>
                </ul>
            </section>
            <section>
                <h2>Test cycle</h2>
                <ul>
                    <li class="fragment fade-in"><b class="red">Red</b> : Un test en erreur</li>
                    <li class="fragment fade-in green"><b class="green">Green</b> : Je fais passer le test</li>
                    <li class="fragment fade-in blue"><b class="blue">Refactor</b> : Que puis-je améliorer ?</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Red : Ecrire un test rouge (<b>je l'exécute</b>) -> il teste quelque chose</li>
                        <li>Green : Faire passer ce test <b>uniquement</b> le plus vite possible</li>
                        <li>Refactor : clean it, le test aussi</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Outils de tests</h2>
                <ul>
                    <li>Mock</li>
                    <li>Spy</li>
                    <li class="fragment fade-in">Librairies : Mockito, Typemock</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Mock : Je définie le comportement
                            <ul>
                                <li>Dépendance complexe</li>
                                <li>Partial mock</li>
                            </ul>
                        </li>
                        <li>Spy : Je regarde quelle fct est appelée
                            <ul>
                                <li>appel DAO</li>
                            </ul>
                        </li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Structure du test</h2>
                <ul>
                    <li>// Given</li>
                    <li>// When</li>
                    <li>// Then</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Given : Etat initial</li>
                        <li>When : Ce que l'on teste</li>
                        <li>Then : Vérifications</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h1>Let's go</h1>
            </section>
            <section>
                <h2>Kata 1</h2>
                <a href="http://kata1.com">http://kata1.com</a>
            </section>
            <section>
                <h2>Code legacy</h2>
                <ul>
                    <li>Créer une couverture de tests</li>
                    <li>Utiliser les outils de l'IDE</li>
                    <li>Micro steps</li>
                </ul>
            </section>
            <section>
                <h2>A creuser</h2>
                <ul>
                    <li>TPP : Transformation priority promises</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>TPP : Uncle Bob -> listes de transformations pour rendre le code générique</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Resources</h2>
                <ul>
                    <li>Growing OO software guided by tests</li>
                    <li><a href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks aren't Stubs</a></li>
                    <li>Test Driven Development: By Example</li>
                    <li><a href="https://www.youtube.com/watch?v=XHnuMjah6ps">Outside in TDD : live coding</a></li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Growing object-oriented software guided by tests -> Steve Freeman</li>
                        <li>Mocks aren't stubs : martin fowler</li>
                        <li>Test Driven Development: By Example -> Kent Beck</li>
                        <li>Outside in TDD -> Sandro mancuso</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Aller plus loin</h2>
                <ul>
                    <li>ATTD : Acceptance Test Driven Development</li>
                    <li>BDD : Behavior Driven Development</li>
                    <li>Pyramide des Test</li>
                </ul>
            </section>
        </section>
        <section>
            <section>
                <h2>Clean code</h2>
                <h3 class="fragment fade-in">Legacy code</h3>
                <aside class="notes">
                    Clean code implique code non clean -> le code legacy
                </aside>
            </section>
            <section>
                <h2>Clean code, c'est quoi ?</h2>
                <ul class="fragment fade-in">
                    <li>Un livre de Robert C. Martin</li>
                    <li>Maintenable</li>
                    <li>Expressif</li>
                    <li>Testable / Testé</li>
                    <li>Faible complexité</li>
                    <li>...</li>
                </ul>
                <aside class="notes">
                    C'est quoi le clean code pour vous ?
                </aside>
            </section>
            <section>
                <h2>Pourquoi faire du clean code ?</h2>
                <ul class="fragment fade-in">
                    <li>Allez plus vite</li>
                    <li>Augmenter la productivité</li>
                    <li>Avoir une application plus fiable</li>
                    <li>Bien / Mieux faire</li>
                </ul>
                <aside class="notes">
                    Pourquoi faire du clean code ?
                </aside>
            </section>
            <section>
                <h2>Comment faire du clean code ?</h2>
                <ul class="fragment fade-in">
                    <li>Des principes</li>
                    <li>Des pratiques</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Des principes à "essayer" d'appliquer, parfois pas très parlant</li>
                        <li>Des pratiques à adopter</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Des principes</h2>
                <ul>
                    <li>KISS</li>
                    <li>DRY</li>
                    <li>YAGNI</li>
                    <li>SLAP</li>
                    <li>SOLID</li>
                    <li>...</li>
                </ul>
            </section>
            <section>
                <h2>KISS</h2>
                <p>Keep It Simple Stupid</p>
                <aside class="notes">
                    <ul>
                        <li>Garder les choses simples</li>
                        <li>Lisible</li>
                        <li>Maintenable</li>
                        <li>Testable</li>
                        <li>...</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>DRY</h2>
                <p>Don't repeat yourself</p>
                <aside class="notes">
                    <ul>
                        <li>Ne vous répétez pas</li>
                        <li><b>/!\</b> Attention : peut provoquer une sur factorisation</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>YAGNI</h2>
                <p>You Ain't Gonna Need It</p>
                <aside class="notes">
                    <ul>
                        <li>code évolutif</li>
                        <li>ne pas anticiper les évolutions</li>
                        <li>anticipation <ul>
                            <li>plus de complexité</li>
                            <li>code mort</li>
                            <li>mauvaise anticipation</li>
                            <li>code legacy</li>
                        </ul></li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>SLAP</h2>
                <p>Single Layer Abstraction Principle</p>
                <aside class="notes">
                    <ul>
                        <li>Je ne vois qu'une couche</li>
                        <li>pas de métier dans les DAO</li>
                        <li>+ réutilisabilité</li>
                        <li>+ testable</li>
                        <li>+ lisible</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>SOLID</h2>
                <ul>
                    <li><b>S</b>ingle responsibility principle</li>
                    <li><b>O</b>pen close principle</li>
                    <li><b>L</b>iskov substitution</li>
                    <li><b>I</b>nterface segregation</li>
                    <li><b>D</b>ependency inversion</li>
                </ul>
            </section>
            <section>
                <h2>Single Responsability Principle</h2>
                <pre class="fragment fade-in"><code>
public void sendGreetings(String fileName, XDate xDate,
                          String smtpHost, int smtpPort)
                    throws IOException, ParseException,
                           AddressException, MessagingException {

    BufferedReader in = new BufferedReader(new FileReader(fileName));
    String str = "";
    str = in.readLine(); // skip header
    while ((str = in.readLine()) != null) {
        // parse line
        String[] employeeData = str.split(", ");
        Employee employee = new Employee(employeeData[1], employeeData[0],
                                         employeeData[2], employeeData[3]);
        if (employee.isBirthday(xDate)) {
            // Send mail
            String recipient = employee.getEmail();
            String body = "Happy Birthday, dear %NAME%"
                            .replace("%NAME%", employee.getFirstName());
            String subject = "Happy Birthday!";
            sendMessage(smtpHost, smtpPort, "sender@here.com",
                        subject, body, recipient);
        }
    }
}
                </code></pre>
                <aside class="notes">
                    <ul>
                        <li>parsing fichier</li>
                        <li>Envoie mail</li>
                        <li>Création mail</li>
                        <li>filtre des employé</li>
                        <li>Je ne peux rien réutiliser</li>
                        <li>Je devrais dupliquer</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Open / close principle</h2>
                <pre class="fragment fade-in"><code>
public double Area(Object[] shapes) {
    double area = 0;
    foreach (Shape shape : shapes) {
        if (shape instanceof Rectangle) {
            Rectangle rectangle = (Rectangle) shape;
            area += rectangle.getWidth() * rectangle.getHeight();
        }
        else {
            Circle circle = (Circle) shape;
            area += circle.getRadius() * circle.getRadius() * Math.PI;
        }
    }
    return area;
}
                </code></pre>
                <aside class="notes">
                    <ul>
                        <li>obligé de modifier pour ajouter une forme</li>
                        <li>je vais oublier</li>
                        <li>je n'aurais pas d'erreur si j'oublie</li>
                        <li>parsing fichier</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Liskov substitution</h2>
                <pre class="fragment fade-in"><code>
public class Rectangle {
    private int width;
    private int height;
    public void setWidth(int width) { this.width = width; }
    public void setHeight(int height) { this.height = height; }
}

public class Carre extends rectangle {
    private int side;
    public void setWidth(int width) { this.side = width; }
    public void setHeight(int height) { this.side = height; }
}

rectange.setHeight(4);
rectange.setHeight(5);
                </code></pre>
                <aside class="notes">
                    <ul>
                        <li>une implementation doit être remplacable par n'importe quel implémentation</li>
                        <li>ex : HashMap, TreeMap</li>
                        <li>interface = contrat</li>
                        <li>ici : carré etend de rectangle</li>
                        <li>mais carré n'a qu'une donnée side</li>
                        <li>carré ne respecte pas le contrat de rectangle</li>
                        <li>provoque des comportements étrange</li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Interface segregation</h2>
                <pre class="fragment fade-in"><code>

                </code></pre>
                <aside class="notes">
                    <ul>
                        <li></li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Dependency inversion</h2>
                <pre class="fragment fade-in"><code>

                </code></pre>
                <aside class="notes">
                    <ul>
                        <li></li>
                    </ul>
                </aside>
            </section>
            <section>
                <h2>Des pratiques</h2>
                <ul>
                    <li>Code review</li>
                    <li>Pair programming</li>
                    <li>Extreme programming</li>
                    <li>Unit testing</li>
                </ul>
            </section>
            <section>
                <h2>Mais dans la vrai vie ?</h2>
            </section>
            <section>
                <h2>Des noms éloquents</h2>
            </section>
            <section>
                <h2>Des petites méthodes</h2>
            </section>
            <section>
                <h2>Des classes cohérentes</h2>
            </section>
            <section>
                <h2>Aux niveaux supperieurs</h2>
                <ul>
                    <li>Architecture hexagonale</li>
                    <li>DDD</li>
                    <li>...</li>
                </ul>
            </section>
            <section>
                <h2>Pro Tips !</h2>
                <p>Use IDE tools</p>
            </section>
            <section>
                <h2>Un Mindset</h2>
                <blockquote>Comment puis-je rendre ce code meilleur ?</blockquote>
                <p>Vous, demain</p>
            </section>
            <section>
                <h2></h2>
            </section>
        </section>
    </div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        history: true,

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [{
            src: 'plugin/markdown/marked.js'
        }, {
            src: 'plugin/markdown/markdown.js'
        }, {
            src: 'plugin/notes/notes.js',
            async: true
        }, {
            src: 'plugin/highlight/highlight.js',
            async: true,
            callback: function () {
                hljs.initHighlightingOnLoad();
            }
        }]
    });
</script>
</body>

</html>