<!-- Site built using grunt includes! -->
<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Clean code</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/novencia.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<!--
    Formation Clean code
    
    Quelle est l'obectif
    - présenter
     - Les problèmes résolus
     - Les portes ouvertes
    - Donner envie
     - De commencer
     - De creuser
    - guider
     - Vers ce qui est applicable tout de suite
     - Vers ce que je dois creuser

    Sujets à aborder :
    La conception (KISS, SLAP, SOLID, ...)
    Les pratiques (Pair programming, relecture, ...)

    Conseil :
    - par quoi commencer
    - comment le mettre en place

    Donner des pistes de sujets à creuser : 
    DDD
    Harchitecture hexagonale
    design pattern

    -->

<body>
    <div class="reveal">
        <div class="slides">
            <!-- Site built using grunt includes! -->
            <!-- Site built using grunt includes! -->
            <section>
                <h2>Clean code</h2>
                <h3>Novencia</h3>
            </section>
            <section>
                <h2>Clean code, Bad code</h2>
                <h3 class="fragment fade-in">C'est quoi le mauvais code ?</h3>
            </section>
            <section>
                    <blockquote>No matter how slow you are writing clean code, you will always be slower if you make a mess.</blockquote>
                    Uncle Bob Martin
                    <aside class="notes">
                            <ul>
                                <li>Auteur de nombreux livres : clean code, clean coder, clean architecture, ...</li>
                                <li>Signataire manifest Agile</li>
                            </ul>
                    </aside>
            </section>
            <section>
                <h3>Déroulé</h3>
                <ul>
                    <li>Coder proprement</li>
                    <li>Les acronymes (SOLID, DRY, ...)</li>
                    <li>Devenir un clean codeur</li>
                    <li>Les outils</li>
                    <li>Kata</li>
                </ul>
            </section>
            <section>
                <h2>Clean code</h2>
                <section></section>
                <section>
                    <h3>Des noms</h3>
                    <ul class="fragment fade-in">
                        <li>Significatif - révélateur</li>
                        <li>Eviter les codes, acronymes</li>
                        <li>Distinctions</li>
                        <li>Un mot par concept</li>
                        <li>Choisir des noms du métier</li>
                        <li>Ajouter du context</li>
                    </ul>
                    <aside class="notes">
                        <ul>
                            <li>toto interdit - que contient - que fait</li>
                            <li></li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h3>Fonctions et méthodes</h3>
                    <ul class="fragment fade-in">
                        <li>Courtes</li>
                        <li>Font une seule chose</li>
                        <li>Un seul niveau d'abstraction</li>
                        <li>éviter les side effects</li>
                    </ul>
                    <aside class="notes"></aside>
                </section>
                <section>
                    <h3>Commentaires</h3>
                    <ul class="fragment fade-in">
                        <li>Ne doit pas compenser le mauvais code</li>
                        <li>Explique pourquoi</li>
                        <li>// TODO: </li>
                    </ul>
                    <aside class="notes"></aside>
                </section>
                <section>
                    <h3>Programmation Objet (et classes)</h3>
                    <ul class="fragment fade-in">
                        <li>Cacher la structure interne</li>
                        <li>Une seule responsabilité</li>
                        <li>Eviter l'héritage</li>
                        <li>Favoriser la composition</li>
                    </ul>
                    <aside class="notes"></aside>
                </section>
            </section>
            <section>
                <h2>Des principes</h2>
                <section>
                    <ul>
                        <li>KISS</li>
                        <li>DRY</li>
                        <li>YAGNI</li>
                        <li>SLAP</li>
                        <li>SOLID</li>
                        <li>...</li>
                    </ul>
                </section>
                <section>
                    <h2>KISS</h2>
                    <p>Keep It Simple Stupid</p>
                    <aside class="notes">
                        <ul>
                            <li>Garder les choses simples</li>
                            <li>Lisible</li>
                            <li>Maintenable</li>
                            <li>Testable</li>
                            <li>...</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>DRY</h2>
                    <p>Don't repeat yourself</p>
                    <aside class="notes">
                        <ul>
                            <li>Ne vous répétez pas</li>
                            <li><b>/!\</b> Attention : peut provoquer une sur factorisation</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>YAGNI</h2>
                    <p>You Ain't Gonna Need It</p>
                    <aside class="notes">
                        <ul>
                            <li>code évolutif</li>
                            <li>ne pas anticiper les évolutions</li>
                            <li>anticipation
                                <ul>
                                    <li>plus de complexité</li>
                                    <li>code mort</li>
                                    <li>mauvaise anticipation</li>
                                    <li>code legacy</li>
                                </ul>
                            </li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>SLAP</h2>
                    <p>Single Layer Abstraction Principle</p>
                    <aside class="notes">
                        <ul>
                            <li>Je ne vois qu'une couche</li>
                            <li>pas de métier dans les DAO</li>
                            <li>+ réutilisabilité</li>
                            <li>+ testable</li>
                            <li>+ lisible</li>
                        </ul>
                    </aside>
                </section>
            </section>
            <section>
                <section>
                    <h2>SOLID</h2>
                    <ul>
                        <li><b>S</b>ingle responsibility principle</li>
                        <li><b>O</b>pen close principle</li>
                        <li><b>L</b>iskov substitution</li>
                        <li><b>I</b>nterface segregation</li>
                        <li><b>D</b>ependency inversion</li>
                    </ul>
                </section>
                <section>
                    <h2>Single Responsability Principle</h2>
                    <pre class="fragment fade-in"><code>
            public void sendGreetings(String fileName, XDate xDate,
            String smtpHost, int smtpPort)
            throws IOException, ParseException,
            AddressException, MessagingException {

                BufferedReader in = new BufferedReader(new FileReader(fileName));
                String str = "";
                str = in.readLine(); // skip header
                while ((str = in.readLine()) != null) {
                    // parse line
                    String[] employeeData = str.split(", ");
                    Employee employee = new Employee(employeeData[1], employeeData[0],
                                    employeeData[2], employeeData[3]);
                    if (employee.isBirthday(xDate)) {
                        // Send mail
                        String recipient = employee.getEmail();
                        String body = "Happy Birthday, dear %NAME%"
                                        .replace("%NAME%", employee.getFirstName());
                        String subject = "Happy Birthday!";
                        sendMessage(smtpHost, smtpPort, "sender@here.com",
                        subject, body, recipient);
                    }
                }
            }
                </code></pre>
                    <aside class="notes">
                        <ul>
                            <li>parsing fichier</li>
                            <li>Envoie mail</li>
                            <li>Création mail</li>
                            <li>filtre des employé</li>
                            <li>Je ne peux rien réutiliser</li>
                            <li>Je devrais dupliquer</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>Open / close principle</h2>
                    <pre class="fragment fade-in"><code>
            public double size(List&lt;Product&gt; items) {
                double size = 0; // cm3
                for (Product item : items) {
                    if (item.type().equals("cd")) {    
                        size += 175;
                    }
                    else if (item.type().equals("dvd")) {    
                        size += 403.92;
                    }
                    else if (item.type().equals("Cassette Vidéo")) {    
                        size += 7687,5;
                    }
                    else if (item.type().equals("Poster")) {    
                        size += Math.PI * Math.pow(10, 2) * item.width;
                    }
                    // ...
                    else if (item.heigth != null &amp;&amp; item.width != null &amp;&amp; item.depth != null) {    
                        size += item.heigth * item.width * item.depth;
                    }
                }
                return size;
            }
                </code></pre>
                    <aside class="notes">
                        <ul>
                            <li>obligé de modifier pour ajouter une forme</li>
                            <li>je vais oublier</li>
                            <li>je n'aurais pas d'erreur si j'oublie</li>
                            <li>parsing fichier</li>
                        </ul>
                    </aside>
                </section>
                <section>
                        <h2>Open / close principle</h2>
                        <pre><code>
            public double size(List&lt;Product&gt; items) {
                double size = 0; // cm3
                for (Product item : items) {
                    size += item.getSize();
                }
                return size;
            }
                    </code></pre>
                        <aside class="notes">
                            <ul>
                                <li>obligé de modifier pour ajouter une forme</li>
                                <li>je vais oublier</li>
                                <li>je n'aurais pas d'erreur si j'oublie</li>
                                <li>parsing fichier</li>
                            </ul>
                        </aside>
                    </section>
                <section>
                    <h2>Liskov substitution</h2>
                    <pre class="fragment fade-in"><code>
            List&lt;String&gt; emails = Collections.unmodifiableList();
            // ... plus loin dans le code
            strings.add("maxime.gelle@novencia.com");
            // Compile but throw UnsupportedOperationException

            List&lt;String&gt; names = new ArrayList&lt;String&gt;();
            name.add("Maxime GELLE"); // Works !
            </code></pre>
                    <pre class="fragment fade-in"><code>
            UnmodifiableList&lt;String&gt; emails = Collections.unmodifiableList();
            strings.add("maxime.gelle@novencia.com"); // Don't compile

            List&lt;String&gt; names = new ArrayList&lt;String&gt;();
            name.add("Maxime GELLE"); // Works !
            </code></pre>
                    <aside class="notes">
                        <ul>
                            <li>une implementation doit être remplacable par n'importe quel implémentation</li>
                            <li>ex : HashMap, TreeMap</li>
                            <li>interface = contrat</li>
                        </ul>
                    </aside>
                </section>
                <section>
                    <h2>Interface segregation</h2>
                    <pre class="fragment fade-in"><code>
            public class User {
                private String firstname, lastname, email;
                private List&lt;Item&gt; purchasedItems;
                private List&ltProduct&gt; cartProductIds;
                private String address1;
                private String address2;
                private String zipCode;
                private String city;
                private Integer lastPurchaseId;
                private List&lt;Integer&gt; allPurchaseIds; 
            }
                </code></pre>
                    <pre class="fragment fade-in"><code>
            public class Recipient {
                private String firstname, lastname, email;
                private String address1;
                private String address2;
                private String zipCode;
                private String city;
            }
                    </code></pre>
                    <aside class="notes">
                        <p>User a l'air d'être complet cependant il n'a pas une forte cohésion.</p>
                        <p>Suivant les usages, tout n'est pas rempli</p>
                        <p>shoppingCart et paymentDetails pour la finalisation de la commande</p>
                        <p>Il sera impossible de relocaliser ces données (ex: purchasedItems dans une basse doc) sans un gros Travail
                            de refacto</p>
                    </aside>
                </section>
                <section>
                    <h2>Dependency inversion</h2>
                    <pre class="fragment fade-in"><code>
            public class CartService {

                public void validate(Cart cart) {
                    EmailService emailService = new EmailService();
                    PaypalService paypalService = new PaypalService(); 
                    SippingService shippingService = new LaPosteService();

                    paypalService.makePayment(cart.getUser(), cart.sum());
                    emailService.sendCartValidatedMail();
                    shippingService.ship(cart.getUser(), cart.getItems());
                }
            }
                    </code></pre>
                    <pre class="fragment fade-in"><code>
            public class CartService {

                CartService(MessageService emailService, SippingService shippingService) {
                    this.emailService = emailService;
                    this.shippingService = shippingService;
                }

                public void validate(Cart cart, PaymentService paymentService) {
                    paypalService.makePayment(cart.getUser(), cart.sum());
                    emailService.sendCartValidatedMail();
                    shippingService.ship(cart.getUser(), cart.getItems());
                }
            }       
                    </code></pre>
                    <aside class="notes">
                        <p>Je ne peux pas changer EventLogWriter par une autre classe</p>
                        <p>ex: EmailNotifier</p>
                    </aside>
                </section>
            </section>
            <section>
                <h2>Devenir un clean codeur</h2>
                <section></section>
                <section>
                    <h1>Essayer</h1>
                </section>
                <section>
                    <h1>Refactorer</h1>
                </section>
                <section>
                    <h1>Tests unitaires</h1>
                </section>
                <section>
                    <h1>Code review</h1>
                </section>
                <section>
                    <h1>Pair programming</h1>
                </section>
                <section>
                    <h1>Rien est parfait</h1>
                </section>
            </section>
            <section>
                <h2>Outils</h2>
                <section>
                    <h3>Sonarqube</h3>
                </section>
                <section>
                    <h3>tslint, jslint, eslint, ...</h3>
                </section>
            </section>
            <section>
                <h2>Kata</h2>
                <section>
                    <h3>birthday greetings kata</h3>
                </section>
            </section>
        </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            history: true,

            // More info https://github.com/hakimel/reveal.js#dependencies
            dependencies: [{
                src: 'plugin/markdown/marked.js'
            }, {
                src: 'plugin/markdown/markdown.js'
            }, {
                src: 'plugin/notes/notes.js',
                async: true
            }, {
                src: 'plugin/highlight/highlight.js',
                async: true,
                callback: function () {
                    hljs.initHighlightingOnLoad();
                }
            }]
        });
    </script>
</body>

</html>